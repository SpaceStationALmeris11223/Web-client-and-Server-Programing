<!DOCTYPE html>
<html lang="en">
<head>
  <title>Club Membership</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    .selected {
      text-decoration: line-through ;
      font-style: italic;
      color: gray;
    }
    input {
      width: 100%;
      padding: 5px;
      margin: 5px 5px 5px 0px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

<div id="app">
  <h1>Student Club Roster</h1>
  <h2>Add Students</h2>
  <label for="student-name">Student Name</label>
  <input v-model.trim="newStudentName" id="student-name" name="student-name">
  <br>
  <label for="student-id">Student ID</label>
  <input v-model.trim="newStudentID" id="student-id" name="student-id">
  <br>
  <label for="student-gpa">Student GPA</label>
  <input v-model.trim="newStudentGPA" id="student-gpa" name="student-gpa" type="number">
  <br>
  <button @click="addNewStudent" id="add-student">Add Student</button>
  <h2>Student List</h2>
  <p>There is/are <span id="student-count">{{ studentCount }}</span> student(s) in the club.</p>
  <ul id="student-list">
    <li v-for="student in sortedStudents" @click="selectOrUnselectStudent(student)" :class="{ selected: student.selected }">
      Name: {{ student.name }}, ID: {{ student.ID }}, GPA: {{ student.GPA }}
      <button @click="removeSelectedStudents" class="btn btn-danger" id="remove-selected-students">
        <i class="bi bi-trash2"></i>Remove selected students from the club?
      </button>
    </li>
  </ul>
</div>

<script>
const { createApp, ref, computed } = Vue 

createApp({
  setup() {
    const newStudentName = ref('');
    const newStudentID = ref('');
    const newStudentGPA = ref('');
    const studentList = ref([
      { name: 'Mira Thompson', ID: 'Mira222', GPA: 3.5, selected: false },
      { name: 'Jade Samson', ID: 'Jade111', GPA: 4, selected: false },
      { name: 'Bruno Myles', ID: 'Brun033', GPA: 2.3, selected: false },
      { name: 'Mookie Porter', ID: 'Mook555', GPA: 3, selected: false },
      { name: 'Sophia Thompson', ID: 'Soph321', GPA: 3.2, selected: false },
      { name: 'Hibana Hinawari', ID: 'Hiba213', GPA: 3.8, selected: false },
      { name: 'Bao  Yangling', ID: 'BaoY444', GPA: 3.6, selected: false },
    ]);
    const errors = ref([]);
    
    const studentCount = computed(() => studentList.value.length);

    const addNewStudent = () => {
      errors.value = [];
      if (newStudentName.value.length === 0) {
        errors.value.push('Please enter new student\'s name.');
      }
      if (newStudentID.value.length === 0) {
        errors.value.push('Please enter the new student\'s ID.');
      }
      if (newStudentGPA.value.length === 0 || newStudentGPA.value > 4 || newStudentGPA.value < 0) {
        errors.value.push('Please enter new student\'s GPA in the range 0-4.');
      }
      if (errors.value.length > 0) {
        alert(errors.value.join('\n'));
      } else {
        const student = {
          name: newStudentName.value,
          ID: newStudentID.value,
          GPA: newStudentGPA.value,
          selected: false
        };
        studentList.value.push(student);
        newStudentName.value = '';
        newStudentID.value = '';
        newStudentGPA.value = '';
      }
    };

    const removeSelectedStudents = () => {
      studentList.value = studentList.value.filter((student) => !student.selected);
    };

    const sortedStudents = computed(() => studentList.value.slice().sort((student1, student2) => student1.name.localeCompare(student2.name)));

    const selectOrUnselectStudent = (student) => { 
      student.selected = !student.selected;
    };

    return {
      newStudentGPA,
      newStudentID,
      newStudentName,
      studentList,
      sortedStudents,
      addNewStudent,
      removeSelectedStudents,
      studentCount,
    };
  }
}).mount('#app');
</script>

</body>
</html>